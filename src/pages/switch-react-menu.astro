---
import CaseStudyLayout from "../layouts/CaseStudyLayout.astro";
import { Image } from "astro:assets";
import { switchReactMenuMockup } from "../utils/images";

const sidebarItems = [
  { text: "Overview", href: "#overview" },
  { text: "Context", href: "#context" },
  { text: "Technical Details", href: "#technical-details" },
  { text: "Retrospective", href: "#retrospective" },
];
---

<CaseStudyLayout
  title="Switch React Menu"
  subtitle="A Minimalist Home Menu for Nintendo Switch - Built with React"
  pageTitle="Switch React Menu - Liam Sullivan"
  sidebarItems={sidebarItems}
  projectRole={[
    "Front-End Development",
    "React Development",
    "Nintendo Switch Development",
  ]}
  team={["Solo"]}
  tools={["React", "TypeScript", "nx.js", "react-tela", "esbuild"]}
  timeline={["Ongoing"]}
  githubLink="https://github.com/liambsulliva/switch-react-menu"
>
  <Image
    src={switchReactMenuMockup}
    alt="Switch React Menu"
    class="mx-auto max-h-[700px] w-auto rounded-xl"
    loading="eager"
    slot="hero"
  />

  <div class="case-study-layout">
    <section class="pb-10 pt-10 md:flex md:gap-20" id="overview">
      <h3 class="text-2xl font-semibold text-white">Overview</h3>
      <div>
        <p>
          Switch React Menu is a minimalist home menu for the Nintendo Switch,
          built with React. This project explores the intersection of web
          technologies and console development, leveraging react-tela to render
          React components to a canvas element, which allows the nx.js runtime
          to natively render the components to the Switch screen.
        </p>
        <br />
        <p>
          The application provides a clean, intuitive interface for launching
          Switch applications, with smooth pagination, gamepad support, and
          touch screen compatibility. It demonstrates how modern web development
          frameworks can be adapted for embedded systems and console
          environments.
        </p>
      </div>
    </section>

    <section id="context">
      <h3 class="!mb-3 text-2xl font-semibold text-white">Context</h3>
      <p>
        This project was born from curiosity about bringing modern web
        development practices to console development. Traditional Switch
        homebrew applications are typically built with C/C++, but nx.js provides
        a JavaScript runtime that opens up new possibilities. I wanted to
        explore whether React, a framework I'm familiar with from web
        development, could be adapted for this unique environment.
      </p>
      <br />
      <p>
        The challenge was that React typically renders to the DOM, but the
        Switch environment requires rendering to a canvas. This is where
        react-tela comes inâ€”a library that allows React components to be mounted
        to a canvas element instead of traditional DOM nodes. This abstraction
        layer makes it possible to use React's component model, state
        management, and lifecycle methods while still rendering natively to the
        Switch screen.
      </p>
      <br />
      <p>
        The project structure follows React best practices with a
        component-based architecture:
      </p>
      <br />
      <ul>
        <li>
          <strong>Components:</strong> Reusable UI elements like AppIcon and Navigation
          components
        </li>
        <li>
          <strong>Hooks:</strong> Custom React hooks for gamepad navigation, managing
          input state, and handling user interactions
        </li>
        <li>
          <strong>Lib:</strong> Utility functions for game data management, pagination
          logic, and rendering helpers
        </li>
        <li>
          <strong>Types:</strong> TypeScript definitions ensuring type safety across
          the application
        </li>
      </ul>
    </section>

    <section id="technical-details">
      <h3 class="text-2xl font-semibold text-white">Technical Details</h3>
      <p>
        The application is built with React 18 and TypeScript, providing a
        modern development experience with strong type safety. The build process
        uses esbuild for fast compilation and bundling, creating an optimized
        application bundle that's stored in the /romfs/ directory for deployment
        to the Switch.
      </p>
      <br />
      <p><strong>Controls & Interaction</strong></p>
      <ul>
        <li>
          <strong>L/R Shoulder Buttons:</strong> Navigate between pages of games,
          allowing users to browse through large libraries efficiently
        </li>
        <li>
          <strong>D-Pad/Left Stick:</strong> Navigate between individual games on
          the current page, providing precise control over selection
        </li>
        <li>
          <strong>A Button:</strong> Launch the selected game, executing the Switch's
          native application launch functionality
        </li>
        <li>
          <strong>Touch Screen:</strong> Full touch support for selecting and launching
          games directly, making the interface accessible for handheld mode
        </li>
        <li>
          <strong>Touch Navigation:</strong> On-screen prev/next buttons provide
          an alternative to shoulder button navigation
        </li>
      </ul>
      <br />
      <p>
        The interface features custom font integration (Source Sans Pro) for a
        polished, professional appearance. Game icons are displayed with
        truncated titles to maintain a clean layout, and selected games are
        highlighted to provide clear visual feedback during navigation.
      </p>
      <br />
      <p>
        Smooth pagination ensures that browsing through installed games feels
        responsive and natural, even with large game libraries. The pagination
        system intelligently manages which games are displayed on each page,
        optimizing rendering performance.
      </p>
    </section>

    <section id="retrospective">
      <h3 class="text-2xl font-semibold text-white">Retrospective</h3>
      <p>
        Building Switch React Menu demonstrated that modern web development
        frameworks can successfully be adapted for console environments. The
        project successfully bridges the gap between web development and
        embedded systems, opening up new possibilities for developers familiar
        with React.
      </p>
      <br />
      <ul>
        <li>
          <p>
            <strong>React in Non-DOM Environments:</strong> Working with react-tela
            revealed the flexibility of React's architecture. The component model,
            hooks, and state management work seamlessly even when rendering to a
            canvas instead of the DOM. This opens up possibilities for using React
            in other non-browser environments.
          </p>
        </li>
        <li>
          <p>
            <strong>Input Handling:</strong> Adapting web development patterns for
            gamepad input required rethinking how user interactions are handled.
            Custom hooks for gamepad navigation proved essential, abstracting the
            complexity of input handling while maintaining React's declarative paradigm.
          </p>
        </li>
        <li>
          <p>
            <strong>Performance Considerations:</strong> Console environments have
            different performance characteristics than web browsers. Optimizing rendering,
            managing component updates efficiently, and ensuring smooth animations
            required careful attention to React's rendering lifecycle and canvas
            drawing operations.
          </p>
        </li>
        <li>
          <p>
            <strong>Build Process:</strong> Using esbuild for bundling provided fast
            build times, which was crucial during development. The build process
            creates optimized bundles suitable for the Switch's resource constraints
            while maintaining the development experience of modern JavaScript tooling.
          </p>
        </li>
      </ul>
      <br />
      <p><strong>Future Improvements</strong></p>
      <ul>
        <li>
          <p>
            Add support for custom themes and color schemes, allowing users to
            personalize the interface
          </p>
        </li>
        <li>
          <p>
            Implement game search functionality for users with large game
            libraries
          </p>
        </li>
        <li>
          <p>
            Add support for game favorites and recently played games for quick
            access
          </p>
        </li>
        <li>
          <p>
            Explore additional customization options like grid size preferences
            and icon display modes
          </p>
        </li>
        <li>
          <p>
            Optimize rendering performance for very large game libraries with
            virtualization
          </p>
        </li>
      </ul>
    </section>
  </div>
</CaseStudyLayout>
